# 결제 대행사(Payment Gateway, PG) API를 활용한 결제기능 구현 실습
결제 대행사(Payment Gateway, PG)는 온라인 쇼핑몰에서 고객이 상품을 결제할 때, **신용카드, 간편결제, 계좌이체 등 다양한 결제 수단을 안전하고 편리하게 연결하고 처리해주는 '결제 대행 서비스' 또는 '전자결제 시스템'** 을 의미합니다.  
PG사는 가맹점(온라인 쇼핑몰)을 대신해 카드사나 은행 등 금융기관과 거래를 중계하며, 결제 승인 및 대금 정산을 대행하여 판매자와 구매자 모두에게 편리한 결제 환경을 제공하는 역할을 합니다. 

매장에 가면 결제를 위한 ‘계산대'가 있듯이, PG사는 온라인 쇼핑몰의 계산대 역할을 수행합니다. PG사는 카드 결제, 간편결제, 계좌이체, 가상계좌(무통장입금), 상품권 결제, 휴대폰 결제 등 다양한 결제 방식을 사용할 수 있게 연결해주는 역할을 수행합니다.  
온라인 결제를 대신해 주기 때문에 PG사는 결제대행사, '전자결제 지급대행사'라고도 일컫기도 합니다.  

이전의 실습까지 구현하였던 이커머스 애플리케이션에 대해서 실제 PG사 중 하나인 토스 페이먼츠를 이용하여 결제기능을 구현하는 것이 목표입니다.  

## 구현 흐름
고객이 상점에서 물건을 구입하면, 상점에서 PG로 결제 요청을 보냅니다. PG는 결제 요청을 카드사, 은행과 같은 결제 기관으로 보내서 승인을 받고, 그 결과를 상점에게 전달합니다.  
그 이후 확실히 금액이 지불됐다는 걸 확인한 상점은 물건을 고객에게 전달하고, 고객은 물건값을 결제기관에 지불하고, 결제기관은 PG사에게 정산해주고, PG사는 상점에게 정산하는 방식으로 구성됩니다.  

과정 자체는 간단해 보이지만 각 결제 기관에서 다른 형식의 결제 요청을 요구하고, 다른 형식의 결제 결과를 반환한다고 생각해보면 구현이 상당히 까다롭습니다.  
그러나 PG사를 사용하면 일관된 요청과 일관된 응답을 받을 수 있어서 결제 관리가 훨씬 용이해집니다.  


## 플로우 차트 
<img width="568" height="413" alt="Image" src="https://github.com/user-attachments/assets/7db8ce2b-e3dd-4a8b-a72e-b3c26ef0e4d3" />

> 출처 : https://docs.tosspayments.com/guides/v2/payment-widget/integration (토스페이먼츠 공식문서)

예제의 플로우 차트는 상기 흐름과 같습니다.  

